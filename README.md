 # Описание
Master: Основной сервер PostgreSQL.
Slave: Резервный сервер, который синхронизируется с Master.
Arbiter: Сервер, используемый для определения работоспособности Master и Slave. В каждом контейнере запускается скрипт-агент на Python.
Если теряется сеть между Slave и Master, и Arbiter подтверждает эту потерю, Slave становится новым мастером.
Если же у Slave отсутствует связь как с Master, так и с Arbiter, промоут не выполняется.
Промоут осуществляется созданием триггер-файла "/tmp/promote_me".
Slave проверяет связь с Arbiter и Master каждую секунду.
Master проверяет связь со Slave и Arbiter каждые 5 секунд. При отсутствии обеих связей блокируются все входящие подключения на Master с помощью iptables, изменяя политику по умолчанию на DROP.

# Запуск
Чтобы запустить кластер, используйте команду: docker compose up.

Для тестирования кластера запустите на хосте скрипт: python writer.py

# Тесты
Тест №1 (выход из строя Slave):

synchronous_commit = off: потерь данных нет.
synchronous_commit = remote_apply: потерь данных нет.

Тест №2 (выход из строя Master):

synchronous_commit = off: потеряно 23 записи.
synchronous_commit = remote_apply: потерь данных нет
