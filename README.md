 # Описание
Кластер PostgreSQL состоит из трёх Docker-контейнеров (postgres:9.6 с установленными необходимыми библиотеками для Python): Master, Slave и Arbiter. В каждом контейнере запускается скрипт-агент на Python.

Если теряется сеть между Slave и Master, и Arbiter подтверждает эту потерю, Slave становится новым мастером.

Если же у Slave отсутствует связь как с Master, так и с Arbiter, промоут не выполняется.

Промоут осуществляется созданием триггер-файла "/tmp/promote_me".

Slave проверяет связь с Arbiter и Master каждую секунду.

Master проверяет связь с Slave и Arbiter каждые 5 секунд. При отсутствии обеих связей блокируются все входящие подключения на Master с помощью iptables, изменяя политику по умолчанию на DROP.

# Запуск
Чтобы запустить кластер, используйте команду: docker compose up.

Для тестирования кластера запустите на хосте скрипт: python writer.py

# Тесты
При синхронной репликации - запросы не терялись, при асинхронной потерялись 23 значения.
